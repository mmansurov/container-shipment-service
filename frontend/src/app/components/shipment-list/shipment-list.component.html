<div class="container-xl">
  <div class="table-responsive">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row">
          <div class="col-sm-6">
            <h2>ðŸ“œ Shipments</h2>
          </div>
          <div class="col-sm-6">
            <button [disabled]="(selectedShipments$ | async)?.length === 0" class="btn btn-success"
                    (click)="openExecutionPlanModal()">
              <i class="material-icons">&#xE147;</i>
              <span>Create Execution Plan</span>
            </button>
            <button class="btn btn-secondary" (click)="loadShipments()">
              <i class="fa fa-refresh"></i>
              <span>Load new shipments</span>
            </button>
          </div>
        </div>
      </div>
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th>Select</th>
          <th>Shipment ID</th>
          <th>Origin</th>
          <th>Destination</th>
          <th>Transport Type</th>
          <th>Created Date</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let shipment of shipments$ | async">
          <td>
            <div class="form-check">
              <input type="checkbox" class="form-check-input"
                     [checked]="isSelected(shipment)"
                     (change)="toggleShipmentSelection(shipment)">
            </div>
          </td>
          <td>{{ shipment.id }}</td>
          <td>{{ shipment.origin }}</td>
          <td>{{ shipment.destination }}</td>
          <td>
            <i class="material-icons">{{ getTransportTypeIcon(shipment.transportType) }}</i>
            {{ shipment.transportType }}
          </td>
          <td>{{ shipment.createdDate * 1000 | date:'MMM d, y' }}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<app-execution-plan-modal
    *ngIf="showExecutionPlanModal"
    [selectedShipments]="selectedShipments$ | async"
    (close)="closeExecutionPlanModal()"
    (planCreated)="onPlanCreated()">
</app-execution-plan-modal>
